{"ast":null,"code":"/** \n * Copyright © INOVUA TRADING.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nObject.defineProperty(exports, \"renderColumnContextMenu\", {\n  enumerable: true,\n  get: function get() {\n    return _renderColumnContextMenu.default;\n  }\n});\nObject.defineProperty(exports, \"renderRowContextMenu\", {\n  enumerable: true,\n  get: function get() {\n    return _renderRowContextMenu.default;\n  }\n});\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = require(\"react\");\n\nvar _detectUa = require(\"../../../detect-ua\");\n\nvar _region = _interopRequireDefault(require(\"../../../packages/region\"));\n\nvar _getGlobal = require(\"../../../getGlobal\");\n\nvar _renderColumnContextMenu = _interopRequireDefault(require(\"./renderColumnContextMenu\"));\n\nvar _renderRowContextMenu = _interopRequireDefault(require(\"./renderRowContextMenu\"));\n\nvar globalObject = (0, _getGlobal.getGlobal)();\n\nvar _default = function _default(props, computedProps, computedPropsRef) {\n  var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      columnContextMenuProps = _useState2[0],\n      setColumnContextMenuProps = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      rowContextMenuProps = _useState4[0],\n      setRowContextMenuProps = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(null),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      columnContextMenuInstanceProps = _useState6[0],\n      setColumnContextMenuInstanceProps = _useState6[1];\n\n  var getConstrainRegion = function getConstrainRegion(computedProps) {\n    if (!computedProps.parentComputedProps) {\n      return document.documentElement;\n    }\n\n    var node = computedProps.getDOMNode();\n    node = node ? node.querySelector('.InovuaReactDataGrid__virtual-list') || node : node;\n    return node;\n  };\n\n  var getColumnMenuConstrainTo = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    return computedProps.initialProps.columnContextMenuConstrainTo || getConstrainRegion(computedProps);\n  }, []);\n  var getRowMenuConstrainTo = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    return computedProps.initialProps.rowContextMenuConstrainTo || getConstrainRegion(computedProps);\n  }, []);\n  var columnContextMenuIndex = (0, _react.useRef)(-1);\n  var preventIEMenuCloseRef = (0, _react.useRef)(false);\n  var columnContextMenuInfoRef = (0, _react.useRef)({\n    menuAlignTo: null,\n    getMenuConstrainTo: getColumnMenuConstrainTo,\n    menuOnHide: function menuOnHide() {}\n  });\n  var rowContextMenuInfoRef = (0, _react.useRef)({\n    menuAlignTo: null,\n    getMenuConstrainTo: getRowMenuConstrainTo,\n    menuOnHide: function menuOnHide() {}\n  });\n  var hideColumnContextMenu = (0, _react.useCallback)(function () {\n    if (_detectUa.IS_IE && preventIEMenuCloseRef.current) {\n      return;\n    }\n\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.columnContextMenuProps) {\n      var columnContextMenuOnHide = columnContextMenuInfoRef.current.menuOnHide;\n\n      if (typeof columnContextMenuOnHide == 'function') {\n        columnContextMenuOnHide();\n      }\n\n      computedProps.setColumnContextMenuProps(null);\n    }\n  }, []);\n  var hideRowContextMenu = (0, _react.useCallback)(function () {\n    if (_detectUa.IS_IE && preventIEMenuCloseRef.current) {\n      return;\n    }\n\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.preventBlurOnContextMenuOpen && computedProps.preventBlurOnContextMenuOpen.current) {\n      computedProps.preventBlurOnContextMenuOpen.current = false;\n    }\n\n    if (computedProps.rowContextMenuProps) {\n      var rowContextMenuOnHide = rowContextMenuInfoRef.current.menuOnHide;\n\n      if (typeof rowContextMenuOnHide == 'function') {\n        rowContextMenuOnHide();\n      }\n\n      computedProps.setRowContextMenuProps(null);\n    }\n  }, []);\n  var showColumnContextMenu = (0, _react.useCallback)(function (alignTo, cellProps, cellInstance, onHide) {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.columnContextMenuProps) {\n      computedProps.hideColumnContextMenu();\n      return;\n    }\n\n    columnContextMenuIndex.current = cellProps.columnIndex;\n    columnContextMenuInfoRef.current = {\n      menuAlignTo: alignTo,\n      getMenuConstrainTo: getColumnMenuConstrainTo,\n      menuOnHide: onHide\n    };\n\n    if (computedProps.hideColumnFilterContextMenu) {\n      computedProps.hideColumnFilterContextMenu();\n    }\n\n    computedProps.setColumnContextMenuProps(cellProps);\n    computedProps.setColumnContextMenuInstanceProps(cellInstance);\n  }, []);\n  var getMenuAvailableHeight = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return 0;\n    }\n\n    var filtersHeight = 0;\n\n    if (computedProps.computedIsFilterable) {\n      var filterNode = computedProps.getDOMNode().querySelector('.InovuaReactDataGrid__column-header__filter-wrapper');\n\n      if (filterNode) {\n        filtersHeight = filterNode.offsetHeight;\n      }\n    }\n\n    var size = computedProps.initialProps.parentComputedProps ? computedProps.initialProps.parentComputedProps.size : computedProps.size;\n    var result = size ? size.height - 5 + filtersHeight : 0;\n    return result;\n  }, []);\n  var onRowContextMenu = (0, _react.useCallback)(function (rowProps, event) {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    var initialProps = computedProps.initialProps;\n\n    if (initialProps.onRowContextMenu) {\n      initialProps.onRowContextMenu(rowProps, event);\n    }\n\n    if (!initialProps.renderRowContextMenu) {\n      return;\n    }\n\n    if (computedProps.preventBlurOnContextMenuOpen) {\n      computedProps.preventBlurOnContextMenuOpen.current = true;\n    }\n\n    event.preventDefault();\n    var cellProps = event.nativeEvent ? event.nativeEvent.__cellProps : undefined;\n\n    var alignTo = _region.default.from(event);\n\n    alignTo.shift({\n      top: -globalObject.scrollY,\n      left: -globalObject.scrollX\n    });\n    showRowContextMenu(alignTo, rowProps, cellProps, function () {});\n  }, []);\n  var showRowContextMenu = (0, _react.useCallback)(function (alignTo, rowProps, cellProps, onHide) {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.rowContextMenuProps) {\n      computedProps.hideRowContextMenu();\n      return;\n    }\n\n    rowContextMenuInfoRef.current = {\n      menuAlignTo: alignTo,\n      getMenuConstrainTo: getRowMenuConstrainTo,\n      cellProps: cellProps,\n      menuOnHide: onHide\n    };\n\n    if (computedProps.hideRowFilterContextMenu) {\n      computedProps.hideRowFilterContextMenu();\n    }\n\n    computedProps.setRowContextMenuProps(rowProps);\n  }, []);\n  return {\n    onRowContextMenu: onRowContextMenu,\n    getMenuAvailableHeight: getMenuAvailableHeight,\n    showRowContextMenu: showRowContextMenu,\n    showColumnContextMenu: showColumnContextMenu,\n    hideColumnContextMenu: hideColumnContextMenu,\n    hideRowContextMenu: hideRowContextMenu,\n    columnContextMenuProps: columnContextMenuProps,\n    columnContextMenuInstanceProps: columnContextMenuInstanceProps,\n    rowContextMenuProps: rowContextMenuProps,\n    columnContextMenuInfoRef: columnContextMenuInfoRef,\n    rowContextMenuInfoRef: rowContextMenuInfoRef,\n    setColumnContextMenuProps: setColumnContextMenuProps,\n    setColumnContextMenuInstanceProps: setColumnContextMenuInstanceProps,\n    setRowContextMenuProps: setRowContextMenuProps,\n    preventIEMenuCloseRef: preventIEMenuCloseRef,\n    columnContextMenuIndex: columnContextMenuIndex\n  };\n};\n\nexports.default = _default;","map":{"version":3,"sources":["/Users/sungjaejoo/Desktop/ILP-main/node_modules/@inovua/reactdatagrid-community/plugins/menus/useMenus/index.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","enumerable","get","_renderColumnContextMenu","_renderRowContextMenu","_slicedToArray2","_react","_detectUa","_region","_getGlobal","globalObject","getGlobal","_default","props","computedProps","computedPropsRef","_useState","useState","_useState2","columnContextMenuProps","setColumnContextMenuProps","_useState3","_useState4","rowContextMenuProps","setRowContextMenuProps","_useState5","_useState6","columnContextMenuInstanceProps","setColumnContextMenuInstanceProps","getConstrainRegion","parentComputedProps","document","documentElement","node","getDOMNode","querySelector","getColumnMenuConstrainTo","useCallback","current","initialProps","columnContextMenuConstrainTo","getRowMenuConstrainTo","rowContextMenuConstrainTo","columnContextMenuIndex","useRef","preventIEMenuCloseRef","columnContextMenuInfoRef","menuAlignTo","getMenuConstrainTo","menuOnHide","rowContextMenuInfoRef","hideColumnContextMenu","IS_IE","columnContextMenuOnHide","hideRowContextMenu","preventBlurOnContextMenuOpen","rowContextMenuOnHide","showColumnContextMenu","alignTo","cellProps","cellInstance","onHide","columnIndex","hideColumnFilterContextMenu","getMenuAvailableHeight","filtersHeight","computedIsFilterable","filterNode","offsetHeight","size","result","height","onRowContextMenu","rowProps","event","renderRowContextMenu","preventDefault","nativeEvent","__cellProps","undefined","from","shift","top","scrollY","left","scrollX","showRowContextMenu","hideRowFilterContextMenu"],"mappings":"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","sourcesContent":["/** \n * Copyright © INOVUA TRADING.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nObject.defineProperty(exports, \"renderColumnContextMenu\", {\n  enumerable: true,\n  get: function get() {\n    return _renderColumnContextMenu.default;\n  }\n});\nObject.defineProperty(exports, \"renderRowContextMenu\", {\n  enumerable: true,\n  get: function get() {\n    return _renderRowContextMenu.default;\n  }\n});\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = require(\"react\");\n\nvar _detectUa = require(\"../../../detect-ua\");\n\nvar _region = _interopRequireDefault(require(\"../../../packages/region\"));\n\nvar _getGlobal = require(\"../../../getGlobal\");\n\nvar _renderColumnContextMenu = _interopRequireDefault(require(\"./renderColumnContextMenu\"));\n\nvar _renderRowContextMenu = _interopRequireDefault(require(\"./renderRowContextMenu\"));\n\nvar globalObject = (0, _getGlobal.getGlobal)();\n\nvar _default = function _default(props, computedProps, computedPropsRef) {\n  var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      columnContextMenuProps = _useState2[0],\n      setColumnContextMenuProps = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      rowContextMenuProps = _useState4[0],\n      setRowContextMenuProps = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(null),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      columnContextMenuInstanceProps = _useState6[0],\n      setColumnContextMenuInstanceProps = _useState6[1];\n\n  var getConstrainRegion = function getConstrainRegion(computedProps) {\n    if (!computedProps.parentComputedProps) {\n      return document.documentElement;\n    }\n\n    var node = computedProps.getDOMNode();\n    node = node ? node.querySelector('.InovuaReactDataGrid__virtual-list') || node : node;\n    return node;\n  };\n\n  var getColumnMenuConstrainTo = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    return computedProps.initialProps.columnContextMenuConstrainTo || getConstrainRegion(computedProps);\n  }, []);\n  var getRowMenuConstrainTo = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    return computedProps.initialProps.rowContextMenuConstrainTo || getConstrainRegion(computedProps);\n  }, []);\n  var columnContextMenuIndex = (0, _react.useRef)(-1);\n  var preventIEMenuCloseRef = (0, _react.useRef)(false);\n  var columnContextMenuInfoRef = (0, _react.useRef)({\n    menuAlignTo: null,\n    getMenuConstrainTo: getColumnMenuConstrainTo,\n    menuOnHide: function menuOnHide() {}\n  });\n  var rowContextMenuInfoRef = (0, _react.useRef)({\n    menuAlignTo: null,\n    getMenuConstrainTo: getRowMenuConstrainTo,\n    menuOnHide: function menuOnHide() {}\n  });\n  var hideColumnContextMenu = (0, _react.useCallback)(function () {\n    if (_detectUa.IS_IE && preventIEMenuCloseRef.current) {\n      return;\n    }\n\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.columnContextMenuProps) {\n      var columnContextMenuOnHide = columnContextMenuInfoRef.current.menuOnHide;\n\n      if (typeof columnContextMenuOnHide == 'function') {\n        columnContextMenuOnHide();\n      }\n\n      computedProps.setColumnContextMenuProps(null);\n    }\n  }, []);\n  var hideRowContextMenu = (0, _react.useCallback)(function () {\n    if (_detectUa.IS_IE && preventIEMenuCloseRef.current) {\n      return;\n    }\n\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.preventBlurOnContextMenuOpen && computedProps.preventBlurOnContextMenuOpen.current) {\n      computedProps.preventBlurOnContextMenuOpen.current = false;\n    }\n\n    if (computedProps.rowContextMenuProps) {\n      var rowContextMenuOnHide = rowContextMenuInfoRef.current.menuOnHide;\n\n      if (typeof rowContextMenuOnHide == 'function') {\n        rowContextMenuOnHide();\n      }\n\n      computedProps.setRowContextMenuProps(null);\n    }\n  }, []);\n  var showColumnContextMenu = (0, _react.useCallback)(function (alignTo, cellProps, cellInstance, onHide) {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.columnContextMenuProps) {\n      computedProps.hideColumnContextMenu();\n      return;\n    }\n\n    columnContextMenuIndex.current = cellProps.columnIndex;\n    columnContextMenuInfoRef.current = {\n      menuAlignTo: alignTo,\n      getMenuConstrainTo: getColumnMenuConstrainTo,\n      menuOnHide: onHide\n    };\n\n    if (computedProps.hideColumnFilterContextMenu) {\n      computedProps.hideColumnFilterContextMenu();\n    }\n\n    computedProps.setColumnContextMenuProps(cellProps);\n    computedProps.setColumnContextMenuInstanceProps(cellInstance);\n  }, []);\n  var getMenuAvailableHeight = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return 0;\n    }\n\n    var filtersHeight = 0;\n\n    if (computedProps.computedIsFilterable) {\n      var filterNode = computedProps.getDOMNode().querySelector('.InovuaReactDataGrid__column-header__filter-wrapper');\n\n      if (filterNode) {\n        filtersHeight = filterNode.offsetHeight;\n      }\n    }\n\n    var size = computedProps.initialProps.parentComputedProps ? computedProps.initialProps.parentComputedProps.size : computedProps.size;\n    var result = size ? size.height - 5 + filtersHeight : 0;\n    return result;\n  }, []);\n  var onRowContextMenu = (0, _react.useCallback)(function (rowProps, event) {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    var initialProps = computedProps.initialProps;\n\n    if (initialProps.onRowContextMenu) {\n      initialProps.onRowContextMenu(rowProps, event);\n    }\n\n    if (!initialProps.renderRowContextMenu) {\n      return;\n    }\n\n    if (computedProps.preventBlurOnContextMenuOpen) {\n      computedProps.preventBlurOnContextMenuOpen.current = true;\n    }\n\n    event.preventDefault();\n    var cellProps = event.nativeEvent ? event.nativeEvent.__cellProps : undefined;\n\n    var alignTo = _region.default.from(event);\n\n    alignTo.shift({\n      top: -globalObject.scrollY,\n      left: -globalObject.scrollX\n    });\n    showRowContextMenu(alignTo, rowProps, cellProps, function () {});\n  }, []);\n  var showRowContextMenu = (0, _react.useCallback)(function (alignTo, rowProps, cellProps, onHide) {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.rowContextMenuProps) {\n      computedProps.hideRowContextMenu();\n      return;\n    }\n\n    rowContextMenuInfoRef.current = {\n      menuAlignTo: alignTo,\n      getMenuConstrainTo: getRowMenuConstrainTo,\n      cellProps: cellProps,\n      menuOnHide: onHide\n    };\n\n    if (computedProps.hideRowFilterContextMenu) {\n      computedProps.hideRowFilterContextMenu();\n    }\n\n    computedProps.setRowContextMenuProps(rowProps);\n  }, []);\n  return {\n    onRowContextMenu: onRowContextMenu,\n    getMenuAvailableHeight: getMenuAvailableHeight,\n    showRowContextMenu: showRowContextMenu,\n    showColumnContextMenu: showColumnContextMenu,\n    hideColumnContextMenu: hideColumnContextMenu,\n    hideRowContextMenu: hideRowContextMenu,\n    columnContextMenuProps: columnContextMenuProps,\n    columnContextMenuInstanceProps: columnContextMenuInstanceProps,\n    rowContextMenuProps: rowContextMenuProps,\n    columnContextMenuInfoRef: columnContextMenuInfoRef,\n    rowContextMenuInfoRef: rowContextMenuInfoRef,\n    setColumnContextMenuProps: setColumnContextMenuProps,\n    setColumnContextMenuInstanceProps: setColumnContextMenuInstanceProps,\n    setRowContextMenuProps: setRowContextMenuProps,\n    preventIEMenuCloseRef: preventIEMenuCloseRef,\n    columnContextMenuIndex: columnContextMenuIndex\n  };\n};\n\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}