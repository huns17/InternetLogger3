/** 
 * Copyright Â© INOVUA TRADING.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.setupResizeObserver = void 0;

var _resizeObserverPolyfill = _interopRequireDefault(require("resize-observer-polyfill"));

var setupResizeObserver = function setupResizeObserver(node, callback) {
  var ResizeObs = window.ResizeObserver || _resizeObserverPolyfill.default;
  var observer = new ResizeObs(function (entries) {
    var _first$borderBoxSize;

    var first = entries[0];
    var _first$contentRect = first.contentRect,
        width = _first$contentRect.width,
        height = _first$contentRect.height;

    if ((_first$borderBoxSize = first.borderBoxSize) !== null && _first$borderBoxSize !== void 0 && _first$borderBoxSize[0]) {
      height = first.borderBoxSize[0].blockSize;
      width = first.borderBoxSize[0].inlineSize;
    } else {
      var box = node.getBoundingClientRect();
      height = box.height;
      width = box.width;
    }

    callback({
      width: width,
      height: height
    });
  });
  observer.observe(node);
  return function () {
    observer.disconnect();
  };
};

exports.setupResizeObserver = setupResizeObserver;